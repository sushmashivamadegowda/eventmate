<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}EventSpace - Book Amazing Events{% endblock %}</title>
    {% load static %}
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                        'playfair': ['Playfair Display', 'serif'],
                        'dm-sans': ['DM Sans', 'sans-serif'],
                    },
                    backdropBlur: {
                        'xs': '2px',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        'pulse-slow': {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.8' },
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-1000px 0' },
                            '100%': { backgroundPosition: '1000px 0' },
                        },
                        slideInRight: {
                            'from': { transform: 'translateX(100px)', opacity: '0' },
                            'to': { transform: 'translateX(0)', opacity: '1' },
                        },
                        scaleIn: {
                            'from': { transform: 'scale(0.9)', opacity: '0' },
                            'to': { transform: 'scale(1)', opacity: '1' },
                        },
                        'rotate-slow': {
                            'from': { transform: 'rotate(0deg)' },
                            'to': { transform: 'rotate(360deg)' },
                        },
                        fadeIn: {
                            'from': { opacity: '0' },
                            'to': { opacity: '1' },
                        },
                        slideUp: {
                            'from': { transform: 'translateY(20px)', opacity: '0' },
                            'to': { transform: 'translateY(0)', opacity: '1' },
                        },
                        'gradient-shift': {
                            '0%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                            '100%': { backgroundPosition: '0% 50%' },
                        }
                    },
                    animation: {
                        float: 'float 3s ease-in-out infinite',
                        'pulse-slow': 'pulse-slow 2s ease-in-out infinite',
                        shimmer: 'shimmer 2s infinite',
                        'slide-in-right': 'slideInRight 0.5s ease-out forwards',
                        'scale-in': 'scaleIn 0.3s ease-out forwards',
                        'rotate-slow': 'rotate-slow 20s linear infinite',
                        'fade-in': 'fadeIn 0.3s ease-out forwards',
                        'slide-up': 'slideUp 0.3s ease-out forwards',
                        'gradient': 'gradient-shift 3s ease infinite',
                    }
                }
            }
        }
    </script>
    {% block extra_css %}{% endblock %}
</head>
<body class="font-inter text-gray-900 leading-relaxed text-sm antialiased bg-gray-50 overflow-x-hidden">
    <!-- Header -->
    <header class="sticky top-0 bg-white/95 backdrop-blur-md border-b border-gray-200 z-50 shadow-sm">
        <div class="max-w-[1400px] mx-auto px-8 py-5 flex justify-between items-center sm:px-6">
            <a href="{% url 'event_list' %}" class="font-playfair text-2xl font-bold text-red-500 no-underline tracking-tight">EventSpace</a>

        <div class="flex items-center gap-5">
            {% if user.is_authenticated and user.is_host %}
                <a href="{% url 'create_event' %}" class="no-underline text-gray-900 font-semibold text-sm tracking-wide hover:text-red-500 transition-colors">Host an Event</a>
            {% endif %}

            <div class="user-menu flex items-center gap-2.5 border border-gray-300 rounded-2xl px-3 py-1.5 cursor-pointer relative hover:bg-gray-50 transition-colors" onclick="toggleDropdown()">
                <span class="text-lg">‚ò∞</span>
                <span class="text-lg">üë§</span>
                <div class="absolute top-16 right-0 bg-white/90 backdrop-blur-sm border border-gray-200 rounded-xl shadow-xl min-w-60 hidden z-[900]" id="userDropdown">
                    {% if user.is_authenticated %}
                        <a href="{% url 'profile' %}" class="block px-4 py-3 text-gray-900 no-underline text-sm font-medium hover:bg-gray-100 transition-colors">Profile</a>
                        <a href="{% url 'my_bookings' %}" class="block px-4 py-3 text-gray-900 no-underline text-sm font-medium hover:bg-gray-100 transition-colors">My Bookings</a>
                        {% if user.is_host %}
                            <a href="{% url 'my_events' %}" class="block px-4 py-3 text-gray-900 no-underline text-sm font-medium hover:bg-gray-100 transition-colors">My Events</a>
                        {% endif %}
                        <a href="{% url 'settings' %}" class="block px-4 py-3 text-gray-900 no-underline text-sm font-medium hover:bg-gray-100 transition-colors">Settings</a>
                        <a href="#" onclick="document.getElementById('logout-form').submit(); return false;" class="block px-4 py-3 text-gray-900 no-underline text-sm font-medium hover:bg-gray-100 transition-colors">Logout</a>
                    {% else %}
                        <a href="{% url 'login' %}" class="block px-4 py-3 text-gray-900 no-underline text-sm font-medium hover:bg-gray-100 transition-colors">Login</a>
                        <a href="{% url 'signup' %}" class="block px-4 py-3 text-gray-900 no-underline text-sm font-medium hover:bg-gray-100 transition-colors">Sign Up</a>
                    {% endif %}
                </div>
            </div>
            </div>
        </div>
    </header>

    <!-- Messages -->
    {% if messages %}
        <div class="fixed top-20 right-5 z-[2000] max-w-[400px]">
            {% for message in messages %}
                <div class="px-5 py-3.75 mb-2.5 rounded-lg shadow-lg text-sm font-medium {% if message.tags == 'success' %}bg-green-100 text-green-800 border-l-4 border-green-500{% elif message.tags == 'error' %}bg-red-100 text-red-800 border-l-4 border-red-500{% elif message.tags == 'warning' %}bg-yellow-100 text-yellow-800 border-l-4 border-yellow-500{% else %}bg-blue-100 text-blue-800 border-l-4 border-blue-500{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- Main Content -->
    <div class="max-w-[1400px] mx-auto px-8 py-10 min-h-[calc(100vh-400px)] sm:px-6">
        {% block content %}{% endblock %}
    </div>

    <!-- Footer -->
    <footer class="bg-white max-w-[1400px] mx-auto px-8 py-12 mt-20 border-t border-gray-200 sm:px-6">
        <div class="grid grid-cols-3 gap-10 mb-8 sm:grid-cols-1">
            <div>
                <h3 class="font-dm-sans text-xs font-bold uppercase tracking-wider mb-4 text-gray-900">Support</h3>
                <ul class="list-none">
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">Help Center</a></li>
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">Safety Information</a></li>
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">Cancellation Options</a></li>
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">COVID-19 Response</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-dm-sans text-xs font-bold uppercase tracking-wider mb-4 text-gray-900">Community</h3>
                <ul class="list-none">
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">EventSpace Blog</a></li>
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">Community Forum</a></li>
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">Host Resources</a></li>
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">Event Planning Guide</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-dm-sans text-xs font-bold uppercase tracking-wider mb-4 text-gray-900">About</h3>
                <ul class="list-none">
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">Company</a></li>
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">Careers</a></li>
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">Press</a></li>
                    <li class="mb-3"><a href="#" class="text-gray-500 no-underline text-sm font-normal hover:text-red-500 transition-colors">Terms & Privacy</a></li>
                </ul>
            </div>
        </div>
        <div class="pt-6 border-t border-gray-200 flex justify-between text-xs font-normal text-gray-500 tracking-wide">
            <div>¬© 2025 EventSpace, Inc. All rights reserved.</div>
            <div>üåê English (US) ‚Ä¢ $ USD</div>
        </div>
    </footer>

    <script>
        function toggleDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('hidden');
            dropdown.classList.toggle('block');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const userMenu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('userDropdown');
            
            if (userMenu && dropdown && !userMenu.contains(e.target)) {
                dropdown.classList.add('hidden');
                dropdown.classList.remove('block');
            }
        });

        // Auto-hide messages after 5 seconds
        setTimeout(() => {
            const messages = document.querySelectorAll('.fixed.top-20.right-5 > div');
            messages.forEach(msg => {
                msg.style.transition = 'opacity 0.5s';
                msg.style.opacity = '0';
                setTimeout(() => msg.remove(), 500);
            });
        }, 5000);

    </script>
    
    <!-- Hidden logout form -->
    {% if user.is_authenticated %}
    <form id="logout-form" action="{% url 'logout' %}" method="POST" style="display: none;">
        {% csrf_token %}
    </form>
    {% endif %}
    
    {% block extra_js %}{% endblock %}
</body>
</html>